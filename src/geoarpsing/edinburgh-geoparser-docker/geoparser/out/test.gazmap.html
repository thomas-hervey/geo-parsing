<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="application/xhtml+xml; charset=utf-8" http-equiv="content-type"></meta>
  <title>Geoparser results</title>
  <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAj9ut_juj_t10klD3II_Giw-ZD9NxK2Kk&amp;sensor=false"></script>
  <script type="text/javascript">

    var map;
    var markers = new Array();

    var icondir = "http://www.google.com/intl/en_us/mapfiles/ms/micons/";
    var red_icon = icondir+"red-dot.png";
    var green_icon = icondir+"green-dot.png";

    function load() {
        var center = new google.maps.LatLng(48.8534100,
                                            2.3488000);
	map = new google.maps.Map(document.getElementById("map"),
                               {center: center,
                                zoom: 6,
                                overviewMapControl: true,
                                overviewMapControlOptions: {opened: true}
                               });
	
        point = new google.maps.LatLng(48.8534100, 2.3488000);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 1 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 1
      });
      markers.push(marker);

        point = new google.maps.LatLng(44.2597900, -70.5006200);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 2 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 2
      });
      markers.push(marker);

        point = new google.maps.LatLng(38.2098000, -84.2529900);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 3 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 3
      });
      markers.push(marker);

        point = new google.maps.LatLng(43.2000000, -80.3833300);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 4 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 4
      });
      markers.push(marker);

        point = new google.maps.LatLng(48.8533900, 2.3486400);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 5 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 5
      });
      markers.push(marker);

        point = new google.maps.LatLng(48.8534000, 2.3486000);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 6 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 6
      });
      markers.push(marker);

        point = new google.maps.LatLng(36.3020000, -88.3267100);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 7 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 7
      });
      markers.push(marker);

        point = new google.maps.LatLng(40.4036800, -80.5125700);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 8 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 8
      });
      markers.push(marker);

        point = new google.maps.LatLng(40.1283900, -83.9596600);
        var marker = new google.maps.Marker({
	    title: "Saint Paris",
	    icon: 9 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 9
      });
      markers.push(marker);

        point = new google.maps.LatLng(32.5973900, -82.3337400);
        var marker = new google.maps.Marker({
	    title: "Swainsboro",
	    icon: 10 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 10
      });
      markers.push(marker);

        point = new google.maps.LatLng(33.0580000, -89.5895600);
        var marker = new google.maps.Marker({
	    title: "Kosciusko",
	    icon: 11 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 11
      });
      markers.push(marker);

        point = new google.maps.LatLng(39.6111500, -87.6961400);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 12 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 12
      });
      markers.push(marker);

        point = new google.maps.LatLng(39.8569900, -84.7932900);
        var marker = new google.maps.Marker({
	    title: "New Paris",
	    icon: 13 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 13
      });
      markers.push(marker);

        point = new google.maps.LatLng(33.6609400, -95.5555100);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 14 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 14
      });
      markers.push(marker);

        point = new google.maps.LatLng(35.2920300, -93.7299200);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 15 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 15
      });
      markers.push(marker);

        point = new google.maps.LatLng(43.0805400, -96.7736600);
        var marker = new google.maps.Marker({
	    title: "Beresford",
	    icon: 16 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 16
      });
      markers.push(marker);

        point = new google.maps.LatLng(39.4808700, -92.0012800);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 17 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 17
      });
      markers.push(marker);

        point = new google.maps.LatLng(53.2974000, 60.1005000);
        var marker = new google.maps.Marker({
	    title: "Parizh",
	    icon: 18 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 18
      });
      markers.push(marker);

        point = new google.maps.LatLng(42.2271500, -111.4010400);
        var marker = new google.maps.Marker({
	    title: "Paris",
	    icon: 19 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 19
      });
      markers.push(marker);

        point = new google.maps.LatLng(8.0505300, -80.5540900);
        var marker = new google.maps.Marker({
	    title: "Par√≠s",
	    icon: 20 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 20
      });
      markers.push(marker);

        point = new google.maps.LatLng(44.0000000, -71.0000000);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 1 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 1
      });
      markers.push(marker);

        point = new google.maps.LatLng(44.2055600, -70.3064300);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 2 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 2
      });
      markers.push(marker);

        point = new google.maps.LatLng(40.3347900, -79.9269900);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 3 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 3
      });
      markers.push(marker);

        point = new google.maps.LatLng(40.7961700, -81.5015100);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 4 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 4
      });
      markers.push(marker);

        point = new google.maps.LatLng(39.2070200, -81.7087400);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 5 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 5
      });
      markers.push(marker);

        point = new google.maps.LatLng(39.3339600, -81.9409700);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 6 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 6
      });
      markers.push(marker);

        point = new google.maps.LatLng(39.0095200, -82.0668100);
        var marker = new google.maps.Marker({
	    title: "Bradbury",
	    icon: 7 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 7
      });
      markers.push(marker);

        point = new google.maps.LatLng(34.9103600, -85.4802400);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 8 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 8
      });
      markers.push(marker);

        point = new google.maps.LatLng(38.9876100, -74.9532300);
        var marker = new google.maps.Marker({
	    title: "Town Bank",
	    icon: 9 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 9
      });
      markers.push(marker);

        point = new google.maps.LatLng(46.5391800, -102.8682200);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 10 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 10
      });
      markers.push(marker);

        point = new google.maps.LatLng(-29.6000000, 30.4333300);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 11 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 11
      });
      markers.push(marker);

        point = new google.maps.LatLng(53.0500600, -105.4010200);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 12 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 12
      });
      markers.push(marker);

        point = new google.maps.LatLng(8.4672800, -13.2338000);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 13 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 13
      });
      markers.push(marker);

        point = new google.maps.LatLng(18.3666700, -77.1666700);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 14 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 14
      });
      markers.push(marker);

        point = new google.maps.LatLng(40.7825900, -75.9757600);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 15 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 15
      });
      markers.push(marker);

        point = new google.maps.LatLng(-30.8166700, 27.5000000);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 16 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 16
      });
      markers.push(marker);

        point = new google.maps.LatLng(32.7903500, -108.3761600);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 17 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 17
      });
      markers.push(marker);

        point = new google.maps.LatLng(-30.8617900, 27.4885300);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 18 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 18
      });
      markers.push(marker);

        point = new google.maps.LatLng(-29.8556100, 29.2303000);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 19 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 19
      });
      markers.push(marker);

        point = new google.maps.LatLng(-29.3426400, 116.3462000);
        var marker = new google.maps.Marker({
	    title: "New England",
	    icon: 20 == 1 ? green_icon : red_icon,
            position: point,
            map: map,
	    zIndex: google.maps.Marker.MAX_ZINDEX + 1000 - 20
      });
      markers.push(marker);


	adjust_locations(markers);
    }

    function goto(x, y) {
        map.setCenter(new google.maps.LatLng(x, y), 10);
    }

    function show_info(name) {
	var para = document.getElementById("message").firstChild;
	para.nodeValue = name;
    }

    
//<![CDATA[

// adjust the locations of identically-positioned candidates so they are
// distinguishable on the map.

function adjust_locations(markers)
{
    markers.sort(compare_locations);

    var dups = new Array();

    var lastlat = 99999, lastlng = 9999;
    for(var i=0; i < markers.length; i++)
    {
        var l = markers[i].getPosition();
        if(l.lat() == lastlat && l.lng() == lastlng)
        {
//            alert("match: " + l.lat() + "," + l.lng() + " = " + lastlat + ","  + lastlng);
            dups.push(markers[i]);
        }
        else
        {
            if(dups.length > 1)
                spread(dups);
            dups.length = 0;
            dups.push(markers[i]);
        }
        lastlat = l.lat();
        lastlng = l.lng();
    }
    if(dups.length > 1)
        spread(dups);
}

// spread an array of identically-positioned markers into a 0.005 degree circle

function spread(dups)
{
    var latlng = dups[0].getPosition();
    var lat = latlng.lat(), lng = latlng.lng();
//    alert("Spreading " + dups.length + " markers from " + lat + "," + lng);
    for(var i=0; i < dups.length; i++)
    {
        var point = new google.maps.LatLng(55.944696, -3.187004);

        var newlatlng = new google.maps.LatLng(
            lat + Math.sin((2 * 3.14159 * i) / dups.length) * 0.005,
            lng + Math.cos((2 * 3.14159 * i) / dups.length) * 0.005);
        dups[i].setPosition(newlatlng);
//        alert(lat + " -> " + newlatlng.lat() + "   " + lng + " -> " + newlatlng.lng());
    }
}

// comparison function for sorting

function compare_locations(m1, m2)
{
    var l1 = m1.getPosition(), l2 = m2.getPosition();
    if(l1.lat() == l2.lat())
        return l1.lng() - l2.lng();
    else
        return l1.lat() - l2.lat();
}
//]]>
      </script>
  <style>
      .found {color: red;} 
      table  {border-collapse: collapse; empty-cells: show;}
      tr     {border: 1px solid black;}
      td[best="true"] {color: green;}
      td[best="false"] {color: red;}
    </style>
 </head>
 <body onload="load()">
  <div style="height: 400px" id="map"></div>
 </body>
</html>
